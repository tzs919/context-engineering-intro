---
name: "generate-langgraph-prp"
description: "ä¸º LangGraph AI ä»£ç†åŠŸèƒ½ç”Ÿæˆç»¼åˆ PRP"
---

# Generate LangGraph Agent PRP

ä¸ºåŸºäº LangGraph çš„ AI ä»£ç†åŠŸèƒ½å¼€å‘ç”Ÿæˆä¸Šä¸‹æ–‡ä¸°å¯Œã€ç”Ÿäº§å°±ç»ªçš„ PRP (Plan-Research-Process)ã€‚

## Usage

```bash
/generate-langgraph-prp PRPs/INITIAL.md
```

## Purpose

æ ¹æ®åŠŸèƒ½è¯·æ±‚ç”Ÿæˆè¯¦ç»†çš„å®ç°è®¡åˆ’ (PRP),åŒ…å«æ‰€æœ‰å¿…è¦çš„ä¸Šä¸‹æ–‡ã€ä»£ç æ¨¡å¼å’ŒéªŒè¯æ­¥éª¤,ç”¨äºæ„å»º LangGraph AI ä»£ç†ã€‚

## ç”¨æˆ·çš„åŠŸèƒ½ç”¨ä¾‹

**è¾“å…¥**: $ARGUMENTS (INITIAL.md æ–‡ä»¶è·¯å¾„)

## Execution Process

### 1. ğŸ“– Read Feature Request

- è¯»å– INITIAL.md æ–‡ä»¶å†…å®¹
- ç†è§£ä»£ç†çš„æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚
- è¯†åˆ«æ‰€éœ€çš„å·¥å…·ã€æ¶æ„æ¨¡å¼å’Œé›†æˆç‚¹
- åˆ†ææµ‹è¯•å’ŒéªŒè¯è¦æ±‚

### 2. ğŸ” Research & Context Gathering

#### ä»£ç åº“æ¨¡å¼ç ”ç©¶

```bash
# æœç´¢ç›¸ä¼¼çš„ä»£ç†å®ç°
grep -r "create_react_agent\|StateGraph" examples/

# æŸ¥æ‰¾å·¥å…·é›†æˆç¤ºä¾‹
grep -r "@tool" examples/

# æ£€æŸ¥çŠ¶æ€ç®¡ç†æ¨¡å¼
grep -r "TypedDict\|AgentState" examples/

# æŸ¥çœ‹æµ‹è¯•æ¨¡å¼
find tests/ -name "test_*.py"
```

#### LangGraph æ–‡æ¡£ç ”ç©¶

æ”¶é›†ä»¥ä¸‹æ–¹é¢çš„æ–‡æ¡£å’Œæœ€ä½³å®è·µ:

1. **ä»£ç†æ¶æ„æ¨¡å¼**
   - ReAct agents (å·¥å…·ä½¿ç”¨)
   - Multi-agent systems (å¤šä»£ç†åä½œ)
   - Router agents (è·¯ç”±é€‰æ‹©)
   - Reflection agents (è‡ªæˆ‘æ‰¹è¯„)

2. **å·¥å…·é›†æˆ**
   - @tool è£…é¥°å™¨ç”¨æ³•
   - ToolNode é…ç½®
   - å·¥å…·é”™è¯¯å¤„ç†
   - è‡ªå®šä¹‰å·¥å…·å¼€å‘

3. **çŠ¶æ€ç®¡ç†**
   - TypedDict å®šä¹‰
   - Reducer å‡½æ•°ä½¿ç”¨
   - çŸ­æœŸè®°å¿† (ä¼šè¯å†…)
   - é•¿æœŸè®°å¿† (è·¨ä¼šè¯)

4. **æ¨¡å‹æä¾›å•†é›†æˆ**
   - Anthropic Claude é…ç½®
   - OpenAI GPT é…ç½®
   - æ¨¡å‹é€‰æ‹©ç­–ç•¥
   - Token ç®¡ç†

5. **ç»“æ„åŒ–è¾“å‡º**
   - Pydantic æ¨¡å‹å®šä¹‰
   - with_structured_output() æ–¹æ³•
   - è¾“å‡ºéªŒè¯

6. **æµ‹è¯•å’ŒéªŒè¯**
   - Pytest æµ‹è¯•æ¨¡å¼
   - å¼‚æ­¥æµ‹è¯•
   - Mock å’Œ fixtures
   - è¡Œä¸ºéªŒè¯

#### Web ç ”ç©¶ (å¦‚éœ€è¦)

å¦‚æœåŠŸèƒ½éœ€è¦ç‰¹å®šå·¥å…·æˆ–é›†æˆ:

```bash
# ä½¿ç”¨ WebSearch å·¥å…·ç ”ç©¶
# ç¤ºä¾‹: "LangGraph Tavily search integration example"
# ç¤ºä¾‹: "LangGraph Pinecone vector store tutorial"
```

### 3. ğŸ“‹ Review AI Documentation

æ£€æŸ¥ `PRPs/ai_docs/` ç›®å½•:

```bash
# åˆ—å‡ºå¯ç”¨æ–‡æ¡£
ls -la PRPs/ai_docs/

# å¦‚æœå­˜åœ¨ç›¸å…³æ–‡æ¡£,è¯»å–å¹¶æ•´åˆåˆ° PRP ä¸­
```

ç”¨æˆ·å¯èƒ½æ·»åŠ äº†:
- ç‰¹å®šå·¥å…·çš„ API æ–‡æ¡£
- è‡ªå®šä¹‰é›†æˆæŒ‡å—
- é¢†åŸŸç‰¹å®šçŸ¥è¯†åº“

### 4. ğŸ—ï¸ Generate Comprehensive PRP

ä½¿ç”¨ `PRPs/templates/prp_langgraph_base.md` ä½œä¸ºåŸºç¡€æ¨¡æ¿,ç”Ÿæˆå®šåˆ¶åŒ–çš„ PRP:

#### PRP ç»“æ„è¦æ±‚

```markdown
---
name: "åŠŸèƒ½åç§°"
description: "ç®€çŸ­æè¿°"
complexity: "Beginner/Intermediate/Advanced"
---

## Purpose
[æ¸…æ™°è¯´æ˜è¦æ„å»ºä»€ä¹ˆ]

## Why
- è§£å†³çš„é—®é¢˜
- å¯ç”¨çš„åŠŸèƒ½
- æä¾›çš„ä»·å€¼

## What
### ä»£ç†æ¶æ„
- ä»£ç†ç±»å‹ (ReAct/Multi-Agent/Router)
- æ ¸å¿ƒç»„ä»¶åˆ—è¡¨
- å·¥å…·é›†æˆæ¸…å•
- çŠ¶æ€å®šä¹‰
- ç»“æ„åŒ–è¾“å‡ºæ¨¡å¼

### æˆåŠŸæ ‡å‡†
- [ ] å…·ä½“çš„å¯éªŒè¯æ ‡å‡†

## All Needed Context

### LangGraph æ–‡æ¡£
```yaml
# ç›¸å…³æ–‡æ¡£å’Œæ¦‚å¿µ
```

### ä»£ç åº“æ¨¡å¼
```yaml
- file: examples/xxx.py
  why: è¯´æ˜ç›¸å…³æ€§
```

### é¢å¤–ä¸Šä¸‹æ–‡ (æ¥è‡ª ai_docs/)
```yaml
- file: PRPs/ai_docs/xxx.md
  why: æä¾›çš„ä¸Šä¸‹æ–‡
```

## Implementation Blueprint

### Task 1: é¡¹ç›®è®¾ç½®
[è¯¦ç»†çš„è®¾ç½®æ­¥éª¤]

### Task 2-N: å®ç°æ­¥éª¤
[æ¯ä¸ªä»»åŠ¡çš„å…·ä½“æ­¥éª¤,åŒ…å«ä»£ç ç¤ºä¾‹]

## Validation Loop

### Level 1: è¯­æ³•å’Œç±»å‹æ£€æŸ¥
```bash
mypy my_agent/ --strict
# é¢„æœŸ: æ— ç±»å‹é”™è¯¯
# å¦‚æœå¤±è´¥: [ä¿®å¤æŒ‡å¯¼]
```

### Level 2: å•å…ƒæµ‹è¯•
```bash
pytest tests/ -v --cov=my_agent
# é¢„æœŸ: æ‰€æœ‰æµ‹è¯•é€šè¿‡
# å¦‚æœå¤±è´¥: [è°ƒè¯•æŒ‡å¯¼]
```

### Level 3: ä»£ç†è¡Œä¸ºæµ‹è¯•
[å…·ä½“çš„è¡Œä¸ºæµ‹è¯•åœºæ™¯]

### Level 4: LangSmith è¿½è¸ª
[éªŒè¯è¿½è¸ªå’Œç›‘æ§]

## Security Checklist
- [ ] API å¯†é’¥ç®¡ç†
- [ ] è¾“å…¥éªŒè¯
- [ ] è¾“å‡ºå‡€åŒ–
- [ ] é€Ÿç‡é™åˆ¶

## Common Gotchas
[åŠŸèƒ½ç‰¹å®šçš„å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ]

## Final Checklist
- [ ] æ‰€æœ‰éªŒè¯é¡¹
```

### 5. ğŸ“ Save PRP File

å°†ç”Ÿæˆçš„ PRP ä¿å­˜åˆ° `PRPs/` ç›®å½•:

```bash
# æ–‡ä»¶å‘½å: PRPs/prp_<feature_name>.md
# ç¤ºä¾‹: PRPs/prp_web_search_agent.md
```

## Validation

å‘½ä»¤ç¡®ä¿:

1. **ä¸Šä¸‹æ–‡å®Œæ•´æ€§**
   - æ‰€æœ‰å¼•ç”¨çš„ä»£ç æ¨¡å¼å­˜åœ¨äºä»£ç åº“ä¸­
   - æ–‡æ¡£é“¾æ¥æœ‰æ•ˆä¸”å¯è®¿é—®
   - ai_docs/ ä¸­çš„å†…å®¹å·²æ•´åˆ

2. **å®ç°å¯è¡Œæ€§**
   - å®ç°ä»»åŠ¡å…·ä½“ä¸”å¯æ“ä½œ
   - ä»£ç ç¤ºä¾‹è¯­æ³•æ­£ç¡®
   - éªŒè¯å¾ªç¯å…¨é¢ä¸”å¯æ‰§è¡Œ

3. **LangGraph ç‰¹å¼‚æ€§**
   - åŒ…å«æ­£ç¡®çš„ LangGraph æ¨¡å¼
   - å·¥å…·é›†æˆæ–¹æ³•å‡†ç¡®
   - çŠ¶æ€ç®¡ç†éµå¾ªæœ€ä½³å®è·µ
   - æµ‹è¯•ç­–ç•¥é€‚åˆä»£ç†å¼€å‘

4. **éªŒè¯å¯æ‰§è¡Œæ€§**
   - æ‰€æœ‰éªŒè¯å‘½ä»¤å¯ç”± Claude Code æ‰§è¡Œ
   - å¤±è´¥åœºæ™¯åŒ…å«æ¸…æ™°çš„ä¿®å¤æŒ‡å¯¼
   - æˆåŠŸæ ‡å‡†æ˜ç¡®ä¸”å¯æµ‹é‡

## Research Areas Checklist

åœ¨ç”Ÿæˆ PRP å‰,ç ”ç©¶ä»¥ä¸‹é¢†åŸŸ:

- [ ] **ä»£ç†æ¶æ„**: ReAct/Multi-Agent/Router/Reflection æ¨¡å¼
- [ ] **å·¥å…·å®šä¹‰**: @tool è£…é¥°å™¨,å‚æ•°éªŒè¯,é”™è¯¯å¤„ç†
- [ ] **çŠ¶æ€ç®¡ç†**: TypedDict,reducers,è®°å¿†æ¨¡å¼
- [ ] **æ¨¡å‹é›†æˆ**: Anthropic/OpenAI é…ç½®,token ç®¡ç†
- [ ] **ç»“æ„åŒ–è¾“å‡º**: Pydantic æ¨¡å‹,éªŒè¯ç­–ç•¥
- [ ] **æµ‹è¯•æ¨¡å¼**: Pytest å•å…ƒæµ‹è¯•,è¡Œä¸ºæµ‹è¯•,async æµ‹è¯•
- [ ] **å®‰å…¨å®è·µ**: API å¯†é’¥ç®¡ç†,è¾“å…¥éªŒè¯,æç¤ºæ³¨å…¥é˜²æŠ¤
- [ ] **å¸¸è§é™·é˜±**: Token é™åˆ¶,InvalidUpdateError,é€’å½’é™åˆ¶
- [ ] **éƒ¨ç½²æ¨¡å¼**: langgraph.json é…ç½®,ç¯å¢ƒå˜é‡
- [ ] **ç›‘æ§è°ƒè¯•**: LangSmith é›†æˆ,è¿½è¸ªé…ç½®

## Output

åœ¨ `PRPs/` ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªç»¼åˆçš„ PRP æ–‡ä»¶,åŒ…å«:

- âœ… å®Œæ•´çš„åŠŸèƒ½æè¿°å’Œç›®æ ‡
- âœ… æ‰€æœ‰å¿…è¦çš„ä¸Šä¸‹æ–‡å’Œä»£ç æ¨¡å¼
- âœ… é€æ­¥çš„å®ç°ä»»åŠ¡ (Task 1, 2, 3...)
- âœ… LangGraph ç‰¹å®šçš„éªŒè¯å¾ªç¯
- âœ… å®‰å…¨æœ€ä½³å®è·µ
- âœ… å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ
- âœ… æ¸…æ™°çš„æˆåŠŸæ ‡å‡†

ç”Ÿæˆçš„ PRP åº”è¯¥æ˜¯è‡ªåŒ…å«çš„,æä¾›å®ç°åŠŸèƒ½æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯,æ— éœ€é¢å¤–çš„å¤–éƒ¨ç ”ç©¶ã€‚

## Example Command Flow

```bash
# 1. åˆ›å»ºåŠŸèƒ½è¯·æ±‚
cat > PRPs/INITIAL.md << 'EOF'
# æ„å»ºç½‘ç»œæœç´¢å’Œè®¡ç®—ä»£ç†
...åŠŸèƒ½éœ€æ±‚...
EOF

# 2. ç”Ÿæˆ PRP
/generate-langgraph-prp PRPs/INITIAL.md

# 3. ç”Ÿæˆçš„ PRP ä¿å­˜åœ¨
# PRPs/prp_web_search_calculator_agent.md

# 4. æ‰§è¡Œ PRP
/execute-langgraph-prp PRPs/prp_web_search_calculator_agent.md
```

---

**é‡è¦**: æ­¤å‘½ä»¤ä¸“æ³¨äº**ç ”ç©¶å’Œè§„åˆ’**,ä¸æ‰§è¡Œå®ç°ã€‚å®é™…çš„ä»£ç ç”Ÿæˆå’Œæµ‹è¯•ç”± `/execute-langgraph-prp` å‘½ä»¤å®Œæˆã€‚
