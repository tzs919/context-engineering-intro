name: "å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼šç ”ç©¶æ™ºèƒ½ä½“ä¸é‚®ä»¶è‰ç¨¿å­æ™ºèƒ½ä½“"
description: |

## ç›®çš„
æ„å»ºä¸€ä¸ª Pydantic AI å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œå…¶ä¸­ä¸»è¦çš„ç ”ç©¶æ™ºèƒ½ä½“ä½¿ç”¨ Brave Search APIï¼Œå¹¶æ‹¥æœ‰ä¸€ä¸ªé‚®ä»¶è‰ç¨¿æ™ºèƒ½ä½“ï¼ˆä½¿ç”¨ Gmail APIï¼‰ä½œä¸ºå·¥å…·ã€‚è¿™å±•ç¤ºäº†æ™ºèƒ½ä½“ä½œä¸ºå·¥å…·çš„æ¨¡å¼ä»¥åŠå¤–éƒ¨ API é›†æˆã€‚

## æ ¸å¿ƒåŸåˆ™
1. **ä¸Šä¸‹æ–‡ä¸ºç‹**ï¼šåŒ…å«æ‰€æœ‰å¿…è¦çš„æ–‡æ¡£ã€ç¤ºä¾‹å’Œæ³¨æ„äº‹é¡¹
2. **éªŒè¯å¾ªç¯**ï¼šæä¾› AI å¯è¿è¡Œå’Œä¿®å¤çš„å¯æ‰§è¡Œæµ‹è¯•/ä»£ç æ£€æŸ¥
3. **ä¿¡æ¯å¯†é›†**ï¼šä½¿ç”¨ä»£ç åº“ä¸­çš„å…³é”®å­—å’Œæ¨¡å¼
4. **æ¸è¿›å¼æˆåŠŸ**ï¼šä»ç®€å•å¼€å§‹ï¼ŒéªŒè¯ï¼Œç„¶åå¢å¼º

---

## ç›®æ ‡
åˆ›å»ºä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ CLI ç ”ç©¶ä¸»é¢˜ï¼Œç ”ç©¶æ™ºèƒ½ä½“å¯ä»¥å°†é‚®ä»¶èµ·è‰ä»»åŠ¡å§”æ‰˜ç»™é‚®ä»¶è‰ç¨¿æ™ºèƒ½ä½“ã€‚è¯¥ç³»ç»Ÿåº”æ”¯æŒå¤šä¸ª LLM æä¾›å•†å¹¶å®‰å…¨å¤„ç† API è®¤è¯ã€‚

## åŸå› 
- **ä¸šåŠ¡ä»·å€¼**ï¼šè‡ªåŠ¨åŒ–ç ”ç©¶å’Œé‚®ä»¶èµ·è‰å·¥ä½œæµ
- **é›†æˆ**ï¼šå±•ç¤ºé«˜çº§ Pydantic AI å¤šæ™ºèƒ½ä½“æ¨¡å¼
- **è§£å†³çš„é—®é¢˜**ï¼šå‡å°‘åŸºäºç ”ç©¶çš„é‚®ä»¶é€šä¿¡çš„æ‰‹åŠ¨å·¥ä½œ

## å†…å®¹
åŸºäº CLI çš„åº”ç”¨ç¨‹åºï¼Œå…¶ä¸­ï¼š
- ç”¨æˆ·è¾“å…¥ç ”ç©¶æŸ¥è¯¢
- ç ”ç©¶æ™ºèƒ½ä½“ä½¿ç”¨ Brave API è¿›è¡Œæœç´¢
- ç ”ç©¶æ™ºèƒ½ä½“å¯ä»¥è°ƒç”¨é‚®ä»¶è‰ç¨¿æ™ºèƒ½ä½“æ¥åˆ›å»º Gmail è‰ç¨¿
- ç»“æœå®æ—¶æµå¼è¿”å›ç»™ç”¨æˆ·

### æˆåŠŸæ ‡å‡†
- [ ] ç ”ç©¶æ™ºèƒ½ä½“é€šè¿‡ Brave API æˆåŠŸæœç´¢
- [ ] é‚®ä»¶æ™ºèƒ½ä½“ä½¿ç”¨æ­£ç¡®çš„è®¤è¯åˆ›å»º Gmail è‰ç¨¿
- [ ] ç ”ç©¶æ™ºèƒ½ä½“å¯ä»¥å°†é‚®ä»¶æ™ºèƒ½ä½“ä½œä¸ºå·¥å…·è°ƒç”¨
- [ ] CLI æä¾›å¸¦æœ‰å·¥å…·å¯è§æ€§çš„æµå¼å“åº”
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œä»£ç ç¬¦åˆè´¨é‡æ ‡å‡†

## æ‰€æœ‰å¿…éœ€çš„ä¸Šä¸‹æ–‡

### æ–‡æ¡£ä¸å‚è€ƒèµ„æ–™
```yaml
# å¿…è¯» - å°†è¿™äº›åŒ…å«åœ¨ä½ çš„ä¸Šä¸‹æ–‡çª—å£ä¸­
- url: https://ai.pydantic.dev/agents/
  why: æ ¸å¿ƒæ™ºèƒ½ä½“åˆ›å»ºæ¨¡å¼

- url: https://ai.pydantic.dev/multi-agent-applications/
  why: å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯æ™ºèƒ½ä½“ä½œä¸ºå·¥å…·

- url: https://developers.google.com/gmail/api/guides/sending
  why: Gmail API è®¤è¯å’Œè‰ç¨¿åˆ›å»º

- url: https://api-dashboard.search.brave.com/app/documentation
  why: Brave Search API REST ç«¯ç‚¹

- file: examples/agent/agent.py
  why: æ™ºèƒ½ä½“åˆ›å»ºã€å·¥å…·æ³¨å†Œã€ä¾èµ–é¡¹çš„æ¨¡å¼

- file: examples/agent/providers.py
  why: å¤šæä¾›å•† LLM é…ç½®æ¨¡å¼

- file: examples/cli.py
  why: å¸¦æœ‰æµå¼å“åº”å’Œå·¥å…·å¯è§æ€§çš„ CLI ç»“æ„

- url: https://github.com/googleworkspace/python-samples/blob/main/gmail/snippet/send%20mail/create_draft.py
  why: å®˜æ–¹ Gmail è‰ç¨¿åˆ›å»ºç¤ºä¾‹
```

### å½“å‰ä»£ç åº“ç»“æ„æ ‘
```bash
.
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â”œâ”€â”€ agent.py
â”‚   â”‚   â”œâ”€â”€ providers.py
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ cli.py
â”œâ”€â”€ PRPs/
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ prp_base.md
â”œâ”€â”€ INITIAL.md
â”œâ”€â”€ CLAUDE.md
â””â”€â”€ requirements.txt
```

### æœŸæœ›çš„ä»£ç åº“ç»“æ„æ ‘ä¸å¾…æ·»åŠ æ–‡ä»¶
```bash
.
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ __init__.py               # åŒ…åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ research_agent.py         # å¸¦ Brave Search çš„ä¸»æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ email_agent.py           # å¸¦ Gmail åŠŸèƒ½çš„å­æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ providers.py             # LLM æä¾›å•†é…ç½®
â”‚   â””â”€â”€ models.py                # ç”¨äºæ•°æ®éªŒè¯çš„ Pydantic æ¨¡å‹
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ __init__.py              # åŒ…åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ brave_search.py          # Brave Search API é›†æˆ
â”‚   â””â”€â”€ gmail_tool.py            # Gmail API é›†æˆ
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py              # åŒ…åˆå§‹åŒ–æ–‡ä»¶
â”‚   â””â”€â”€ settings.py              # ç¯å¢ƒå’Œé…ç½®ç®¡ç†
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py              # åŒ…åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ test_research_agent.py   # ç ”ç©¶æ™ºèƒ½ä½“æµ‹è¯•
â”‚   â”œâ”€â”€ test_email_agent.py      # é‚®ä»¶æ™ºèƒ½ä½“æµ‹è¯•
â”‚   â”œâ”€â”€ test_brave_search.py     # Brave æœç´¢å·¥å…·æµ‹è¯•
â”‚   â”œâ”€â”€ test_gmail_tool.py       # Gmail å·¥å…·æµ‹è¯•
â”‚   â””â”€â”€ test_cli.py              # CLI æµ‹è¯•
â”œâ”€â”€ cli.py                       # CLI æ¥å£
â”œâ”€â”€ .env.example                 # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ requirements.txt             # æ›´æ–°çš„ä¾èµ–é¡¹
â”œâ”€â”€ README.md                    # ç»¼åˆæ–‡æ¡£
â””â”€â”€ credentials/.gitkeep         # Gmail å‡­è¯ç›®å½•
```

### å·²çŸ¥é™·é˜±ä¸åº“çš„ç‰¹æ€§
```python
# å…³é”®ï¼šPydantic AI éœ€è¦å…¨ç¨‹å¼‚æ­¥ - å¼‚æ­¥ä¸Šä¸‹æ–‡ä¸­ä¸å…è®¸åŒæ­¥å‡½æ•°
# å…³é”®ï¼šGmail API éœ€è¦é¦–æ¬¡è¿è¡Œæ—¶è¿›è¡Œ OAuth2 æµç¨‹ - éœ€è¦ credentials.json
# å…³é”®ï¼šBrave API æœ‰é€Ÿç‡é™åˆ¶ - å…è´¹å¥—é¤æ¯æœˆ 2000 æ¬¡è¯·æ±‚
# å…³é”®ï¼šæ™ºèƒ½ä½“ä½œä¸ºå·¥å…·æ¨¡å¼éœ€è¦ä¼ é€’ ctx.usage è¿›è¡Œä»¤ç‰Œè¿½è¸ª
# å…³é”®ï¼šGmail è‰ç¨¿éœ€è¦ä½¿ç”¨æ­£ç¡®çš„ MIME æ ¼å¼è¿›è¡Œ base64 ç¼–ç 
# å…³é”®ï¼šå§‹ç»ˆä½¿ç”¨ç»å¯¹å¯¼å…¥ä»¥è·å¾—æ›´æ¸…æ™°çš„ä»£ç 
# å…³é”®ï¼šåœ¨ .env ä¸­å­˜å‚¨æ•æ„Ÿå‡­è¯ï¼Œæ°¸è¿œä¸è¦æäº¤å®ƒä»¬
```

## å®ç°è“å›¾

### æ•°æ®æ¨¡å‹å’Œç»“æ„

```python
# models.py - æ ¸å¿ƒæ•°æ®ç»“æ„
from pydantic import BaseModel, Field
from typing import List, Optional
from datetime import datetime

class ResearchQuery(BaseModel):
    query: str = Field(..., description="è¦è°ƒæŸ¥çš„ç ”ç©¶ä¸»é¢˜")
    max_results: int = Field(10, ge=1, le=50)
    include_summary: bool = Field(True)

class BraveSearchResult(BaseModel):
    title: str
    url: str
    description: str
    score: float = Field(0.0, ge=0.0, le=1.0)

class EmailDraft(BaseModel):
    to: List[str] = Field(..., min_items=1)
    subject: str = Field(..., min_length=1)
    body: str = Field(..., min_length=1)
    cc: Optional[List[str]] = None
    bcc: Optional[List[str]] = None

class ResearchEmailRequest(BaseModel):
    research_query: str
    email_context: str = Field(..., description="é‚®ä»¶ç”Ÿæˆçš„ä¸Šä¸‹æ–‡")
    recipient_email: str
```

### å¾…å®Œæˆä»»åŠ¡åˆ—è¡¨

```yaml
ä»»åŠ¡ 1ï¼šè®¾ç½®é…ç½®å’Œç¯å¢ƒ
CREATE config/settings.py:
  - æ¨¡å¼ï¼šåƒç¤ºä¾‹ä½¿ç”¨ os.getenv ä¸€æ ·ä½¿ç”¨ pydantic-settings
  - åŠ è½½å¸¦é»˜è®¤å€¼çš„ç¯å¢ƒå˜é‡
  - éªŒè¯æ‰€éœ€çš„ API å¯†é’¥æ˜¯å¦å­˜åœ¨

CREATE .env.example:
  - åŒ…å«æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡åŠå…¶æè¿°
  - éµå¾ª examples/README.md ä¸­çš„æ¨¡å¼

ä»»åŠ¡ 2ï¼šå®ç° Brave Search å·¥å…·
CREATE tools/brave_search.py:
  - æ¨¡å¼ï¼šåƒ examples/agent/tools.py ä¸€æ ·çš„å¼‚æ­¥å‡½æ•°
  - ä½¿ç”¨ httpx çš„ç®€å• REST å®¢æˆ·ç«¯ï¼ˆå·²åœ¨ requirements ä¸­ï¼‰
  - ä¼˜é›…åœ°å¤„ç†é€Ÿç‡é™åˆ¶å’Œé”™è¯¯
  - è¿”å›ç»“æ„åŒ–çš„ BraveSearchResult æ¨¡å‹

ä»»åŠ¡ 3ï¼šå®ç° Gmail å·¥å…·
CREATE tools/gmail_tool.py:
  - æ¨¡å¼ï¼šéµå¾ª Gmail å¿«é€Ÿå…¥é—¨ä¸­çš„ OAuth2 æµç¨‹
  - åœ¨ credentials/ ç›®å½•ä¸­å­˜å‚¨ token.json
  - ä½¿ç”¨æ­£ç¡®çš„ MIME ç¼–ç åˆ›å»ºè‰ç¨¿
  - è‡ªåŠ¨å¤„ç†è®¤è¯åˆ·æ–°

ä»»åŠ¡ 4ï¼šåˆ›å»ºé‚®ä»¶è‰ç¨¿æ™ºèƒ½ä½“
CREATE agents/email_agent.py:
  - æ¨¡å¼ï¼šéµå¾ª examples/agent/agent.py ç»“æ„
  - ä½¿ç”¨ deps_type æ¨¡å¼çš„ Agent
  - å°† gmail_tool æ³¨å†Œä¸º @agent.tool
  - è¿”å› EmailDraft æ¨¡å‹

ä»»åŠ¡ 5ï¼šåˆ›å»ºç ”ç©¶æ™ºèƒ½ä½“
CREATE agents/research_agent.py:
  - æ¨¡å¼ï¼šæ¥è‡ª Pydantic AI æ–‡æ¡£çš„å¤šæ™ºèƒ½ä½“æ¨¡å¼
  - å°† brave_search æ³¨å†Œä¸ºå·¥å…·
  - å°† email_agent.run() æ³¨å†Œä¸ºå·¥å…·
  - ä½¿ç”¨ RunContext è¿›è¡Œä¾èµ–æ³¨å…¥

ä»»åŠ¡ 6ï¼šå®ç° CLI æ¥å£
CREATE cli.py:
  - æ¨¡å¼ï¼šéµå¾ª examples/cli.py æµå¼æ¨¡å¼
  - å¸¦æœ‰å·¥å…·å¯è§æ€§çš„é¢œè‰²ç¼–ç è¾“å‡º
  - ä½¿ç”¨ asyncio.run() æ­£ç¡®å¤„ç†å¼‚æ­¥
  - ä¼šè¯ç®¡ç†ç”¨äºå¯¹è¯ä¸Šä¸‹æ–‡

ä»»åŠ¡ 7ï¼šæ·»åŠ å…¨é¢çš„æµ‹è¯•
CREATE tests/:
  - æ¨¡å¼ï¼šé•œåƒç¤ºä¾‹æµ‹è¯•ç»“æ„
  - æ¨¡æ‹Ÿå¤–éƒ¨ API è°ƒç”¨
  - æµ‹è¯•æ­£å¸¸è·¯å¾„ã€è¾¹ç¼˜æƒ…å†µã€é”™è¯¯
  - ç¡®ä¿ 80%+ çš„è¦†ç›–ç‡

ä»»åŠ¡ 8ï¼šåˆ›å»ºæ–‡æ¡£
CREATE README.md:
  - æ¨¡å¼ï¼šéµå¾ª examples/README.md ç»“æ„
  - åŒ…æ‹¬è®¾ç½®ã€å®‰è£…ã€ä½¿ç”¨
  - API å¯†é’¥é…ç½®æ­¥éª¤
  - æ¶æ„å›¾
```

### æ¯ä¸ªä»»åŠ¡çš„ä¼ªä»£ç 

```python
# ä»»åŠ¡ 2ï¼šBrave Search å·¥å…·
async def search_brave(query: str, api_key: str, count: int = 10) -> List[BraveSearchResult]:
    # æ¨¡å¼ï¼šåƒç¤ºä¾‹ä½¿ç”¨ aiohttp ä¸€æ ·ä½¿ç”¨ httpx
    async with httpx.AsyncClient() as client:
        headers = {"X-Subscription-Token": api_key}
        params = {"q": query, "count": count}

        # é™·é˜±ï¼šå¦‚æœ API å¯†é’¥æ— æ•ˆï¼ŒBrave API è¿”å› 401
        response = await client.get(
            "https://api.search.brave.com/res/v1/web/search",
            headers=headers,
            params=params,
            timeout=30.0  # å…³é”®ï¼šè®¾ç½®è¶…æ—¶ä»¥é¿å…æŒ‚èµ·
        )

        # æ¨¡å¼ï¼šç»“æ„åŒ–é”™è¯¯å¤„ç†
        if response.status_code != 200:
            raise BraveAPIError(f"API è¿”å› {response.status_code}")

        # ä½¿ç”¨ Pydantic è§£æå’ŒéªŒè¯
        data = response.json()
        return [BraveSearchResult(**result) for result in data.get("web", {}).get("results", [])]

# ä»»åŠ¡ 5ï¼šå¸¦æœ‰é‚®ä»¶æ™ºèƒ½ä½“ä½œä¸ºå·¥å…·çš„ç ”ç©¶æ™ºèƒ½ä½“
@research_agent.tool
async def create_email_draft(
    ctx: RunContext[AgentDependencies],
    recipient: str,
    subject: str,
    context: str
) -> str:
    """åŸºäºç ”ç©¶ä¸Šä¸‹æ–‡åˆ›å»ºé‚®ä»¶è‰ç¨¿ã€‚"""
    # å…³é”®ï¼šä¼ é€’ usage ç”¨äºä»¤ç‰Œè¿½è¸ª
    result = await email_agent.run(
        f"åˆ›å»ºä¸€å°å‘ç»™ {recipient} å…³äºï¼š{context} çš„é‚®ä»¶",
        deps=EmailAgentDeps(subject=subject),
        usage=ctx.usage  # æ¥è‡ªå¤šæ™ºèƒ½ä½“æ–‡æ¡£çš„æ¨¡å¼
    )

    return f"è‰ç¨¿å·²åˆ›å»ºï¼ŒID ä¸ºï¼š{result.data}"
```

### é›†æˆç‚¹
```yaml
ENVIRONMENT:
  - add to: .env
  - vars: |
      # LLM é…ç½®
      LLM_PROVIDER=openai
      LLM_API_KEY=sk-...
      LLM_MODEL=gpt-4

      # Brave Search
      BRAVE_API_KEY=BSA...

      # Gmailï¼ˆcredentials.json çš„è·¯å¾„ï¼‰
      GMAIL_CREDENTIALS_PATH=./credentials/credentials.json

CONFIG:
  - Gmail OAuthï¼šé¦–æ¬¡è¿è¡Œæ—¶æ‰“å¼€æµè§ˆå™¨è¿›è¡Œæˆæƒ
  - ä»¤ç‰Œå­˜å‚¨ï¼š./credentials/token.jsonï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰

DEPENDENCIES:
  - ä½¿ç”¨ä»¥ä¸‹å†…å®¹æ›´æ–° requirements.txtï¼š
    - google-api-python-client
    - google-auth-httplib2
    - google-auth-oauthlib
```

## éªŒè¯å¾ªç¯

### çº§åˆ« 1ï¼šè¯­æ³•ä¸é£æ ¼
```bash
# é¦–å…ˆè¿è¡Œè¿™äº› - åœ¨ç»§ç»­ä¹‹å‰ä¿®å¤ä»»ä½•é”™è¯¯
ruff check . --fix              # è‡ªåŠ¨ä¿®å¤é£æ ¼é—®é¢˜
mypy .                          # ç±»å‹æ£€æŸ¥

# é¢„æœŸï¼šæ— é”™è¯¯ã€‚å¦‚æœæœ‰é”™è¯¯ï¼Œé˜…è¯»å¹¶ä¿®å¤ã€‚
```

### çº§åˆ« 2ï¼šå•å…ƒæµ‹è¯•
```python
# test_research_agent.py
async def test_research_with_brave():
    """æµ‹è¯•ç ”ç©¶æ™ºèƒ½ä½“æ­£ç¡®æœç´¢"""
    agent = create_research_agent()
    result = await agent.run("AI å®‰å…¨ç ”ç©¶")
    assert result.data
    assert len(result.data) > 0

async def test_research_creates_email():
    """æµ‹è¯•ç ”ç©¶æ™ºèƒ½ä½“å¯ä»¥è°ƒç”¨é‚®ä»¶æ™ºèƒ½ä½“"""
    agent = create_research_agent()
    result = await agent.run(
        "ç ”ç©¶ AI å®‰å…¨å¹¶èµ·è‰é‚®ä»¶å‘é€è‡³ john@example.com"
    )
    assert "draft_id" in result.data

# test_email_agent.py
def test_gmail_authentication(monkeypatch):
    """æµ‹è¯• Gmail OAuth æµç¨‹å¤„ç†"""
    monkeypatch.setenv("GMAIL_CREDENTIALS_PATH", "test_creds.json")
    tool = GmailTool()
    assert tool.service is not None

async def test_create_draft():
    """æµ‹è¯•ä½¿ç”¨æ­£ç¡®ç¼–ç åˆ›å»ºè‰ç¨¿"""
    agent = create_email_agent()
    result = await agent.run(
        "åˆ›å»ºå‘ç»™ test@example.com å…³äº AI ç ”ç©¶çš„é‚®ä»¶"
    )
    assert result.data.get("draft_id")
```

```bash
# è¿­ä»£è¿è¡Œæµ‹è¯•ç›´åˆ°é€šè¿‡ï¼š
pytest tests/ -v --cov=agents --cov=tools --cov-report=term-missing

# å¦‚æœå¤±è´¥ï¼šè°ƒè¯•ç‰¹å®šæµ‹è¯•ï¼Œä¿®å¤ä»£ç ï¼Œé‡æ–°è¿è¡Œ
```

### çº§åˆ« 3ï¼šé›†æˆæµ‹è¯•
```bash
# æµ‹è¯• CLI äº¤äº’
python cli.py

# é¢„æœŸäº¤äº’ï¼š
# ä½ ï¼šç ”ç©¶æœ€æ–°çš„ AI å®‰å…¨å‘å±•
# ğŸ¤– åŠ©æ‰‹ï¼š[æµå¼ä¼ è¾“ç ”ç©¶ç»“æœ]
# ğŸ›  ä½¿ç”¨çš„å·¥å…·ï¼š
#   1. brave_search (query='AI å®‰å…¨å‘å±•', limit=10)
#
# ä½ ï¼šåˆ›å»ºä¸€å°å…³äºæ­¤å†…å®¹çš„é‚®ä»¶è‰ç¨¿å‘é€è‡³ john@example.com
# ğŸ¤– åŠ©æ‰‹ï¼š[åˆ›å»ºè‰ç¨¿]
# ğŸ›  ä½¿ç”¨çš„å·¥å…·ï¼š
#   1. create_email_draft (recipient='john@example.com', ...)

# æ£€æŸ¥ Gmail è‰ç¨¿æ–‡ä»¶å¤¹ä¸­åˆ›å»ºçš„è‰ç¨¿
```

## æœ€ç»ˆéªŒè¯æ¸…å•
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼š`pytest tests/ -v`
- [ ] æ— ä»£ç æ£€æŸ¥é”™è¯¯ï¼š`ruff check .`
- [ ] æ— ç±»å‹é”™è¯¯ï¼š`mypy .`
- [ ] Gmail OAuth æµç¨‹å·¥ä½œï¼ˆæµè§ˆå™¨æ‰“å¼€ï¼Œä»¤ç‰Œå·²ä¿å­˜ï¼‰
- [ ] Brave Search è¿”å›ç»“æœ
- [ ] ç ”ç©¶æ™ºèƒ½ä½“æˆåŠŸè°ƒç”¨é‚®ä»¶æ™ºèƒ½ä½“
- [ ] CLI æµå¼ä¼ è¾“å¸¦æœ‰å·¥å…·å¯è§æ€§çš„å“åº”
- [ ] é”™è¯¯æƒ…å†µå¾—åˆ°ä¼˜é›…å¤„ç†
- [ ] README åŒ…å«æ¸…æ™°çš„è®¾ç½®è¯´æ˜
- [ ] .env.example åŒ…å«æ‰€æœ‰å¿…éœ€çš„å˜é‡

---

## è¦é¿å…çš„åæ¨¡å¼
- âŒ ä¸è¦ç¡¬ç¼–ç  API å¯†é’¥ - ä½¿ç”¨ç¯å¢ƒå˜é‡
- âŒ ä¸è¦åœ¨å¼‚æ­¥æ™ºèƒ½ä½“ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨åŒæ­¥å‡½æ•°
- âŒ ä¸è¦è·³è¿‡ Gmail çš„ OAuth æµç¨‹è®¾ç½®
- âŒ ä¸è¦å¿½ç•¥ API çš„é€Ÿç‡é™åˆ¶
- âŒ ä¸è¦å¿˜è®°åœ¨å¤šæ™ºèƒ½ä½“è°ƒç”¨ä¸­ä¼ é€’ ctx.usage
- âŒ ä¸è¦æäº¤ credentials.json æˆ– token.json æ–‡ä»¶

## ä¿¡å¿ƒåˆ†æ•°ï¼š9/10

é«˜ä¿¡å¿ƒåº¦ç”±äºï¼š
- ä»£ç åº“ä¸­æœ‰æ¸…æ™°çš„ç¤ºä¾‹å¯ä¾›éµå¾ª
- å¤–éƒ¨ API æ–‡æ¡£é½å…¨
- å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„æ—¢å®šæ¨¡å¼
- å…¨é¢çš„éªŒè¯é—¨æ§›

Gmail OAuth é¦–æ¬¡è®¾ç½®ç”¨æˆ·ä½“éªŒå­˜åœ¨è½»å¾®ä¸ç¡®å®šæ€§ï¼Œä½†æ–‡æ¡£æä¾›äº†æ¸…æ™°çš„æŒ‡å¯¼ã€‚